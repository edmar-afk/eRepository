{% load static tailwind_tags %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Signup</title>
    {% tailwind_css %}
    <link rel="icon" type="image/png" href="{% static 'img/logo.png' %}">
    <link rel="stylesheet" href="{% static 'css/user-signin.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.0.0/flowbite.min.css" rel="stylesheet" />
</head>

<body class="bg1">
    <!-- source:https://codepen.io/owaiswiz/pen/jOPvEPB -->
    <div class="min-h-screen text-gray-900 flex justify-center">
        <div
            class="max-w-screen-xl m-0 sm:m-10 backdrop-blur-md bg-white/30 shadow sm:rounded-lg flex justify-center flex-1">
            <div class="lg:w-1/2 xl:w-5/12 p-6 sm:p-12">
                <div class="flex flex-col items-center">
                    <img src="{% static 'img/logo.png' %}" width="60" />
                    <p class="text-black font-semibold">eRepository</p>
                </div>
                <div class="mt-12 flex flex-col items-center">
                    <h1 class="text-2xl xl:text-3xl font-extrabold">
                        Sign up
                    </h1>
                    <div class="w-full flex-1 mt-8">
                        <div class="flex flex-row items-center flex-wrap justify-evenly">

                            <div class="flex">
                                <div id="role-button" data-dropdown-toggle="dropdown-role"
                                    class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-500 bg-gray-100 border border-gray-300 rounded-l-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100"
                                    type="button">
                                    Signup as
                                </div>

                                <label for="role" class="sr-only">Choose a role</label>
                                <select id="role"
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-r-lg border-l-gray-100 border-l-2 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400">
                                    <option selected>Staff</option>
                                    <option value="CA" data-href="{% url 'signup_stud' %}">Current Student</option>
                                    <option value="TX" data-href="{% url 'signup_staff' %}">Staff</option>
                                    <option value="WH" data-href="{% url 'signup_alumni' %}">Alumni</option>
                                    <option value="FL" data-href="{% url 'signup_faculty' %}">Faculty</option>
                                </select>
                            </div>

                        </div>

                        <div class="my-12 border-b text-center">
                            <div
                                class="leading-none px-2 inline-block text-md font-bold text-black bg-white p-2 rounded-3xl shadow-2xl shadow-gray-800 tracking-wide transform translate-y-1/2">
                                Signup as Staff
                            </div>
                        </div>

                        <div class="mx-auto max-w-xs">
                            <form action="{% url 'signup_staff' %}" method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input
                                    class="w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white"
                                    type="text" name="full_name" placeholder="Full Name" required />

                                <input
                                    class="w-full px-8 py-4 mt-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white"
                                    type="text" name="office" placeholder="Office" required />
                                <input
                                    class="w-full px-8 py-4 mt-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white"
                                    type="text" name="username" placeholder="Username" required />
                                <input
                                    class="w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5"
                                    type="password" name="password1" placeholder="Password" required />
                                <input
                                    class="w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5"
                                    type="password" name="password2" placeholder="Repeat Password" required />
                                <input
                                    class="w-full hidden px-8 py-4 mt-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white"
                                    type="text" name="role" placeholder="role" value="Staff" required />

                                <button type="submit" name="submit"
                                    class="mt-5 tracking-wide font-semibold bg-green-500 text-gray-100 w-full py-4 rounded-lg hover:bg-green-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none">
                                    <svg class="w-6 h-6 -ml-2" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                                        <circle cx="8.5" cy="7" r="4" />
                                        <path d="M20 8v6M23 11h-6" />
                                    </svg>
                                    <span class="ml-3">
                                        Sign Up
                                    </span>
                                </button>
                                <br>
                                <center><a href="{% url 'auth' %}"
                                        class="mt-2 font-bold text-lg text-green-600 hover:text-red-600 duration-300">Back
                                        to
                                        Home</a></center>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex-1 backdrop-blur-md bg-green-100/30 text-center hidden lg:flex">
                <div class="m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat"
                    style="background-image: url('../static/img/staff.png');">
                </div>
            </div>
        </div>
    </div>



    {% for message in messages%}
    
    <div id="popup-modal" tabindex="-1"
        class="fixed top-0 left-0 right-0 z-50 p-4 duration-300 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex items-center justify-center transition-opacity">
        <div class="fixed inset-0 bg-gray-700/70 transition-opacity" id="overlay"></div>
        <div class="relative w-full max-w-md max-h-full">
            <div class="relative bg-white border-2 border-red-700 rounded-lg shadow transition-opacity">
    
                <div class="p-6 text-center">
                    <svg class="mx-auto mb-4 text-red-700 w-14 h-14" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                    <h3 class="mb-5 text-lg font-normal text-gray-500">{{message}}</h3>
    
                    <button id="close-modal-button"
                        class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-red-500 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    
    {% endfor %}
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.0.0/flowbite.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const modal = document.getElementById("popup-modal");
            const overlay = document.getElementById("overlay");
            const closeButton = document.getElementById("close-modal-button");

            overlay.addEventListener("click", function () {
                modal.style.display = "none";
            });

            closeButton.addEventListener("click", function () {
                modal.style.display = "none";
            });
        });
    </script>
    <script>
        // Get the select element
        const select = document.getElementById("role");

        // Add a change event listener to the select element
        select.addEventListener("change", function () {
            // Get the selected option
            const selectedOption = select.options[select.selectedIndex];

            // Get the data-href attribute from the selected option
            const link = selectedOption.getAttribute("data-href");

            // Redirect to the URL specified in the data-href attribute
            if (link) {
                window.location.href = link;
            }
        });
    </script>
</body>

</html>