{% load static %}

<div class="col">
    <div class="col mt-4">
      <div class="card">
        <div class="card-header pb-0 px-3">
        <div class="row">
            <div class="col-lg-6 col-7">
                <h6>Manuscripts Table</h6>
                {% for message in messages %}
                  {% if message.level_tag == 'success' %}
                    <p class="alert bg-success text-white"  role="alert">{{ message }}</p>
                  {% else %}
                    <p class="alert bg-info text-white"  role="alert">{{ message }}</p>
                  {% endif %}
                {% endfor %}
            </div>
            <div class="col-lg-6 col-5 my-auto text-end"> 
                <div class=" float-lg-end pe-4">
                  <button type="button" class="btn btn-success" data-toggle="modal" data-target=".bd-example-modal-lg">Add Manuscript</button>

                </div>
                <div class=" float-lg-end pe-4">
                    <form class="form-inline">
                        <div class="input-group">
                          <div class="input-group">
                            <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
                            <input type="text" class="form-control" id="searchInput" placeholder="Search here...">
                          </div>
                        
                        </div>
                      </form>
                  </div>
            </div>
        </div>
        </div>

    
    <div id="itemsContainer">
        <div class="card-body pt-4 p-3">
            
        {% for manuscript_items in manuscripts %}
            <div class="box list-group" style="overflow-x: hidden;">
                <div class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                <div class="d-flex flex-column">
                    <h6 class="mb-3 text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                            <path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z"/>
                        </svg>
                    {{ manuscript_items.title }} - <span class="text-secondary">{{ manuscript_items.program }}</span></h6>
                    <span class="mb-2 text-sm">Authors: 
                        <span class="text-dark font-weight-bold ms-sm-2">{{ manuscript_items.authors }}</span>,
                    </span>
                    <span class="text-sm mb-2">Year: <span class="text-dark ms-sm-2 font-weight-bold">{{ manuscript_items.year }}</span></span>
                    <span class="mb-2 text-sm">Downloads: <span class="text-dark ms-sm-2 font-weight-bold">{{ manuscript_items.downloads }}</span></span>
                </div>
                    <div class="ms-auto text-end">
                        <a href="{% url 'deletebooks' manuscript_items.id %}" class="btn btn-link text-danger text-gradient px-3 mb-0" ><i class="far fa-trash-alt me-2"></i>Delete</a>
                    </div> 
                </div>
            </div>
        {% endfor %}
            
        </div>
        </div>
      </div>
    </div>
  </div>

  
  


  <script>
    const searchInput = document.getElementById('searchInput');
    const itemsContainer = document.getElementById('itemsContainer');
    const items = itemsContainer.getElementsByClassName('box');
  
    searchInput.addEventListener('input', function() {
      const query = searchInput.value.toLowerCase();
  
      for (let i = 0; i < items.length; i++) {
        const item = items[i];
        const text = item.innerText.toLowerCase();
  
        if (text.includes(query)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      }
    });
  </script>